@{
    ViewBag.Title = "Color By Number Grid";
}
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>

</head>

<script>
    var lastClicked;
    var numRows = 20;
    var numCols = 19;
    var numColors = 1;
    var maxColors = 5;
    var wrapper = $(".input_fields_wrap");
    var add_button = $(".add_field_button");

    var colorValueArray = [];

    $(document).ready(function () {

        var superMarioArray = [

            [5, 5, 5, 5, 5, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5],
            [5, 5, 4, 2, 2, 2, 2, 0, 2, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5],
            [5, 4, 2, 2, 2, 2, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5],
            [4, 2, 2, 2, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5],
            [4, 2, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 5, 5, 5, 5, 5, 5, 5],
            [4, 4, 4, 3, 3, 3, 4, 3, 4, 3, 4, 5, 5, 5, 5, 5, 5, 5, 5],
            [3, 4, 4, 3, 3, 3, 4, 3, 4, 3, 4, 5, 5, 5, 5, 5, 5, 5, 5],
            [3, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 4, 5, 5, 5, 5, 5, 5, 5],
            [3, 3, 4, 3, 3, 4, 3, 3, 3, 3, 3, 4, 5, 5, 5, 5, 5, 5, 5],
            [4, 3, 3, 3, 4, 4, 4, 4, 3, 3, 4, 4, 4, 5, 5, 5, 5, 5, 5],
            [5, 4, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5],
            [5, 5, 4, 4, 3, 3, 3, 3, 3, 4, 5, 5, 4, 4, 5, 5, 5, 5, 5],
            [5, 4, 2, 2, 4, 4, 4, 4, 4, 4, 4, 4, 3, 3, 4, 5, 5, 5, 5],
            [4, 2, 2, 2, 2, 4, 6, 4, 2, 2, 4, 4, 3, 3, 4, 5, 5, 5, 5],
            [4, 2, 2, 2, 2, 4, 4, 6, 4, 2, 2, 4, 4, 3, 4, 5, 5, 5, 5],
            [2, 2, 4, 4, 0, 2, 4, 6, 4, 2, 2, 2, 4, 4, 5, 4, 4, 4, 4],
            [2, 4, 3, 3, 3, 4, 4, 0, 6, 4, 4, 4, 0, 4, 4, 4, 7, 7, 4],
            [4, 3, 3, 3, 3, 3, 4, 0, 6, 6, 6, 6, 0, 6, 4, 7, 7, 7, 7],
            [4, 3, 3, 3, 3, 3, 4, 6, 6, 6, 6, 6, 6, 6, 4, 7, 7, 7, 7]
        ];

        function onlyUnique(value, index, self) {
            return self.indexOf(value) === index;
        }

        var i = 1;
        //var dupes = [];
        var uniqueArr = new Array();

        //var arghArr = superMarioArray.filter(onlyUnique);
        //alert(arghArr);

        //let uniqueArr = [...new Set(myArray)];

        //$.each(myArray, function (index, entry) {
        //    if (!dupes[entry.name]) {
        //        dupes[entry.name] = true;
        //        uniqueArr.push(entry);
        //    }
        //});

        //uniqueArr = _.uniq(myArray);
        //uniqueArr = jQuery.uniqueSort(superMarioArray);
        //uniqueArr = $.unique(superMarioArray.sort()).sort();

        //superMarioArray.filter(function() {
        //    var seen = {};
        //    return function(element, index, array) {
        //        return !(element in seen) && (seen[element] = 1);
        //    };
        //}());


        //var arrNumRows = superMarioArray.length;
        //var newArr = new Array();

        //alert(arrNumRows);
        //for (var i = 0; i < arrNumRows; i++) {
        //    var rowLength = superMarioArray[i].length;
        //    for (var j = 0; j < rowLength; j++) {
        //        newArr.push(superMarioArray[i][j]);
        //    }
        //}

        //uniqueArr = _.uniq(newArr);
        //alert(uniqueArr);

        var unique = [].concat(...superMarioArray).filter((e, i, superMarioArray) => { return superMarioArray.indexOf(e) === i }).sort();
        alert(unique);



        var maxField = 10; //Input fields increment limitation
        var addButton = $('.add_button'); //Add button selector
        var wrapper = $('.field_wrapper'); //Input field wrapper
        var fieldHTML = '<div><input type="text" name="field_name[]" value=""/><a href="javascript:void(0);" class="remove_button"><img src="remove-icon.png" width="40px" height="auto"/></a></div>'; //New input field html
        var x = 1; //Initial field counter is 1

        //Once add button is clicked
        $(addButton).click(function () {
            //Check maximum number of input fields
            if (x < maxField) {
                x++; //Increment field counter
                $(wrapper).append(fieldHTML); //Add field html
            }
        });

        //Once remove button is clicked
        $(wrapper).on('click', '.remove_button', function (e) {
            e.preventDefault();
            $(this).parent('div').remove(); //Remove field html
            x--; //Decrement field counter
        });

    });




    var superYoshiArray = [
        [9, 9, 9, 9, 9, 9, 9, 8, 8, 9, 8, 8, 9, 9, 9, 9, 9, 9, 9],
        [9, 9, 9, 9, 9, 9, 8, 6, 6, 8, 6, 6, 8, 9, 9, 9, 9, 9, 9],
        [9, 9, 9, 9, 9, 8, 7, 6, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9],
        [9, 9, 8, 8, 8, 8, 7, 0, 0, 8, 0, 8, 0, 8, 9, 9, 9, 9, 9],
        [9, 8, 5, 5, 5, 8, 0, 0, 0, 8, 0, 8, 0, 8, 9, 9, 9, 9, 9],
        [9, 8, 5, 5, 8, 8, 0, 0, 0, 0, 0, 0, 0, 8, 8, 8, 9, 9, 9],
        [9, 8, 8, 8, 6, 6, 8, 0, 0, 0, 8, 0, 8, 6, 6, 6, 8, 9, 9],
        [8, 5, 8, 6, 6, 6, 6, 8, 8, 8, 6, 8, 6, 6, 0, 0, 6, 8, 9],
        [5, 5, 8, 6, 6, 6, 0, 0, 0, 6, 6, 6, 6, 6, 8, 6, 8, 6, 8],
        [5, 5, 8, 7, 6, 0, 0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 8],
        [8, 8, 8, 7, 6, 0, 0, 0, 0, 8, 6, 6, 6, 6, 6, 6, 6, 6, 8],
        [9, 8, 8, 7, 7, 0, 0, 0, 0, 8, 7, 6, 6, 6, 6, 6, 6, 6, 8],
        [9, 8, 5, 8, 7, 7, 0, 0, 8, 8, 7, 7, 6, 6, 6, 6, 6, 6, 8],
        [9, 9, 8, 8, 8, 7, 7, 0, 0, 8, 7, 7, 7, 7, 6, 6, 6, 8, 9],
        [9, 9, 8, 5, 8, 7, 6, 0, 0, 0, 8, 7, 7, 7, 7, 8, 8, 9, 9],
        [8, 8, 8, 8, 7, 6, 6, 0, 0, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9],
        [5, 8, 8, 8, 7, 6, 0, 0, 0, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9],
        [8, 8, 8, 6, 6, 6, 6, 0, 0, 8, 0, 6, 8, 9, 9, 9, 9, 9, 9],
        [8, 7, 7, 6, 6, 8, 0, 0, 0, 8, 8, 0, 6, 8, 9, 9, 9, 9, 9],
        [6, 6, 6, 6, 8, 0, 0, 0, 0, 8, 8, 8, 6, 8, 9, 9, 9, 9, 9]
    ];

    var finishedDrawingGrid = clickableDrawingGrid(numRows, numCols, function (el, row, col, i) {
        //el.className='clicked';
        if (lastClicked) lastClicked.className = '';
        lastClicked = el;

        $(el).each(function () {
            var cellValue = $(this).html();
            if (!isNaN(parseFloat(cellValue))) {
                if (cellValue == 5) {
                    $(this).css('background-color', 'red');
                    $(this).css('color', 'red');
                }
                if (cellValue == 6) {
                    $(this).css('background-color', 'lightgreen');
                    $(this).css('color', 'lightgreen');
                }
                if (cellValue == 7) {
                    $(this).css('background-color', 'green');
                    $(this).css('color', 'green');
                }

                if (cellValue == 8) {
                    $(this).css('background-color', 'black');
                    $(this).css('color', 'black');
                }
                if (cellValue == 9) {
                    $(this).css('background-color', 'blue');
                    $(this).css('color', 'blue');
                }
                if (cellValue == 0) {
                    $(this).css('background-color', 'white');
                    $(this).css('color', 'white');
                }
            }
        });

    });

    document.body.appendChild(finishedDrawingGrid);

    function clickableDrawingGrid(rows, cols, callback) {
        var i = 0;
        var drawingGrid = document.createElement('table');
        drawingGrid.className = 'drawingGrid';
        for (var r = 0; r < rows; ++r) {
            var tr = drawingGrid.appendChild(document.createElement('tr'));
            for (var c = 0; c < cols; ++c) {
                var cell = tr.appendChild(document.createElement('td'));
                cell.innerHTML = superYoshiArray[r][c];
                //cell.addEventListener('click',(function(el,r,c,i){
                //    return function(){
                //        callback(el,r,c,i);
                //    }
                //})(cell, r, c, i), false);
                cell.addEventListener('mouseover', (function (el, r, c, i) {
                    return function () {
                        callback(el, r, c, i);
                    }
                })(cell, r, c, i), false);
            }
        }
        return drawingGrid;
    }
</script>

<style>
    .drawingGrid {
        margin: 1em auto;
        border-collapse: collapse
    }

        .drawingGrid td {
            cursor: pointer;
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
            text-align: center;
            font-family: sans-serif;
            font-size: 13px;
        }
</style>

<body>
    <p>Please enter the information below:</p>
    <form id='getColorsForm'>
        <div class="field_wrapper">
            <div>
                <input type="text" name="field_name[]" value="" />
                <a href="javascript:void(0);" class="add_button" title="Add field"><img src="add-icon.png" width="40px" height="auto" /></a>
            </div>
        </div>
    </form>

</body>




